<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.gmo.mapper.StudentMapper">

	<select id="findAll" resultMap="studentResult">
        SELECT A.student_code, A.student_name, B.date_of_birth, B.address, B.average_score
		FROM student A join student_info B on A.student_id = B.student_id
    </select>
    
    <resultMap id="studentResult" type="Student">
		<id property="id" column="student_id" />
		<result property="code" column="student_code"/>
		<result property="name" column="student_name"/>
		<association property="studentInfo" resultMap="studentInfoResult" />
	</resultMap>
	
	<resultMap id="studentInfoResult" type="StudentInfo">
		<id property="id" column="info_id" />
		<id property="student.id" column="student_id" />
		<result property="address" column="address"/>
		<result property="averageScore" column="average_score"/>
		<result property="dateOfBirth" column="date_of_birth"/>
	</resultMap>

</mapper>